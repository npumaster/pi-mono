# 为 pi 做贡献

感谢您想要做出贡献！本指南旨在节省我们双方的时间。

## 唯一规则

**你必须理解你的代码。** 如果你不能解释你的更改是做什么的，以及它们如何与系统的其余部分交互，你的 PR 将被关闭。

使用 AI 编写代码是可以的。你可以通过询问可以访问代码库的 Agent 来获得理解，直到你掌握所有边缘情况和更改的影响。不可以的是在没有这种理解的情况下提交 Agent 生成的垃圾代码。

如果你使用 Agent，请从 `pi-mono` 根目录运行它，以便它自动获取 `AGENTS.md`。你的 Agent 必须遵守该文件中的规则和指南。

## 首次贡献者

我们对新贡献者使用批准门槛：

1. 开启一个 issue，描述你想要更改的内容以及原因
2. 保持简洁（如果一屏装不下，那就太长了）
3. 用你自己的语气写，至少在介绍部分
4. 如果获得批准，维护者将评论 `lgtm`
5. 一旦获得批准，你就可以提交 PR

之所以存在这个规定，是因为 AI 使得生成看起来合理但质量低下的贡献变得微不足道。Issue 步骤让我们能够尽早过滤。

## 提交 PR 之前

```bash
npm run check  # 必须通过且无错误
./test.sh      # 必须通过
```

不要编辑 `CHANGELOG.md`。变更日志条目由维护者添加。

如果你要在 `packages/ai` 中添加新的提供商，请参阅 `AGENTS.md` 了解所需的测试。

## 哲学

pi 的核心是极简的。如果你的功能不属于核心，它应该是一个扩展。使核心膨胀的 PR 可能会被拒绝。

## 有问题？

开启一个 issue 或在 [Discord](https://discord.com/invite/nKXTsAcmbT) 上提问。
